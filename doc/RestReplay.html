<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html; charset=us-ascii" http-equiv="content-type">


  <meta name="generator" content="HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.12), see www.w3.org">
  

  <title>RestReplay</title>
  <style type="text/css">
  h1, h2, h3, h4, h5 {
    font-family: Helvetica, 'San Serif';
  }
  td a {
    font-weight: bold;
  }

  .element-hdr, .pathrow {
    font-size: 100%; line-height: 13pt; color: rgb(51, 51, 51); font-weight: bold; background-image: none; background-color: rgb(173, 216, 230);
  }
  .code {
      font-size: 90%;
    white-space: pre;
    font-family: Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace;
    border: 1px dashed rgb(187, 187, 187); margin: 0px 0px 10px; 
    padding: 10px;
    overflow: auto; color: black; 
    hidebackground-color: rgb(220, 240, 220);
    background-color: rgb(240, 250, 240);
  }
  .panel {
    border: 1px dashed rgb(187, 187, 187); margin: 0px 0px 10px; padding: 0px; overflow: auto; color: black; 
    background-color: rgb(240, 240, 240);   
  }
  .comments {
      font-family: Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace;
      font-weight: normal;
      font-style: normal;
      font-size: 110%;
      color: rgb(0, 130, 0);
  }
    
  .public {
      color: blue;
  }
  .note1 {
      color: brown;
      font-weight: bold;
  }

  .matrix {
      border: 0px solid gray;
      border-spacing: 3px;
  }
  .matrix th {
      padding: 5px;
      font-family: Helvetica, 'Sans Serif';
      font-size: 80%;
      border: 0px solid gray;
      background-color: #b0c8c0;
  }
  .matrix td {
      font-family: Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace;
      margin: 5px;
      padding: 4px;
      border: 1px solid gray;
      background-color: #eee;
  }
  #content {
      margin: 20px;
      border: 0px solid green;
  }
  .cheatsheet-body {
      border: 1px solid green;
      background-color: rgb(220, 240, 220);
  }
  #TOCDEST1 {
      width: 48%;
      font-size: 90%;
      float: left;
      margin-right; 0px;
  }
  #TOCDEST2 {
      font-size: 90%;
      width: 48%;
      float: right;
      margin-left: 0;
      }
  div.container {
      padding: 10px;
      border: 1px solid #000000;
      overflow: auto;
      width: 100%;
      background-color: #b0c8c0;
  }
  .cheatsheet-header {
      background-color: #b0cfc0;
      border-bottom: 1px solid green;
      padding: 6px;
      font-weight: bold;
      font-size: 90%;
      font-family: Helvetica, 'San Serif';
      text-align: center;
  }
  .main-toc {
      margin-top: 20px;
      font-size: 70%;
      padding: 20px;
      border: 1px solid black;
      background-color: lightblue;
      display: inline-block;
  }

  </style>
</head>

<body>
  <div id="content" class="page view">
    <div class="wiki-content">
    <h1><a name="RestReplay-RestReplayDocumentation" id="RestReplay-RestReplayDocumentation"></a>RestReplay Documentation</h1>
    <div class="container">
        <center>
<h2>RestReplay Quick Reference</h2></center>
      <div id="TOCDEST1" class="cheatsheet-body">&nbsp;</div>
        <div id="TOCDEST2" class="cheatsheet-body">&nbsp;</div>   
        
    </div>

    <span class="main-toc">
    <h2><a href="#RestReplay-1.Introduction">1. Introduction</a></h2>
    <h3><a href="#RestReplay-1.a.Features">1.a. Features</a></h3>
    <h3><a href="#RestReplay-1.bOverview">1.b Overview</a></h3>
    <h4><a href="#RestReplay-1.b.1Runtime">1.b.1 Runtime</a></h4>

    <h2><a href="#RestReplay-2.ReferenceDocumentation">2. Reference Documentation</a></h2>
    <h3><a href="#RestReplay-2.a.Installation">2.a. Installation</a></h3>
    <h3><a href="#RestReplay-2.b.Configuration">2.b. Configuration</a></h3>
    <h4><a href="#RestReplay-2.b.1GeneralRules">2.b.1 General Rules</a></h4>
    <h3><a href="#RestReplay-2.cRunning">2.c Running</a></h3>
    <h4><a href="#RestReplay-2.c.1Commandlineparameters">2.c.1 Command-line parameters</a></h4>
    <h4><a href="#RestReplay-2.c.2XMLconfigurationparametersinmasterfile">2.c.2 XML configuration parameters in <b>master</b> file</a></h4>
    <h4><a href="#RestReplay-2.c.3XMLconfigurationparametersincontrolfile">2.c.3 XML configuration parameters in <b>control</b> file</a></h4>
    <h4><a href="#RestReplay-2.c.4Cleanup">2.c.4 Cleanup</a></h4>

    </span>
    

    <h2><a name="RestReplay-1.Introduction" id="RestReplay-1.Introduction"></a>1. RestReplay Introduction</h2>

      <p><span class="Apple-style-span">RestReplay is a utility to send REST requests to the services layer (including JSON, XML, and multipart XML requests), read responses, and compare<br>
      the resulting payloads with templates.</span></p>

      <h3><a name="RestReplay-1.a.Features" id="RestReplay-1.a.Features"></a>1.a. Features</h3>

      <ul>
        <li>Completely configurable via XML.</li>

        <li>Abstracts each transaction with server as a "test".</li>

        <li>Multiple tests can be grouped in a testGroup element, and each test may refer to previous tests within testGroup.</li>

        <li>Automatic cleanup of resources allocated within a testGroup.</li>

        <li>Send and receive JSON and XML payloads or MIME-multipart payloads.</li>

        <li>File-based request and response payloads.</li>

        <li>Variable expansion in: URLs, headers, request payloads, and response payloads.</li>

        <li>Simple reporting of results on console and in surefire reports.</li>

        <li>Programmatic interface for driving the tests and testGroups, and for finer control of reporting and cleanup.</li>
      </ul>

      <h3><a name="RestReplay-1.bOverview" id="RestReplay-1.bOverview"></a>1.b Overview</h3>

      <h4><a name="RestReplay-1.b.1Runtime" id="RestReplay-1.b.1Runtime"></a>1.b.1 Runtime</h4>

      <p>At runtime, RestReplay consults parameters passed in on the command line, or from maven surefire,
          or from java:exec which uses parameters found in the pom.xml project file under options for the <span style="font-style: italic; font-weight: bold;">exec-maven-plugin</span> plugin.</p>

      <p>RestReplay then determines which <b>master</b> file to use. This file points to <strong>testGroup</strong>s
          in <b>control</b> files that contain <strong>test</strong>s.</p>

      <p>The default behavior of RestReplay is to look for a directory, called the RestReplay directory.
          This is defined using<strong> -testdir</strong> parameter.</p>

      <p>When running inside maven surefire, this is pre-defined to be a resource directory in the source code module.
          Maven defines a variable called basedir, which points at the project directory for the current pom.xml. In the pom.xml
          file, you can point maven exec:java at the testdir (called "tests" in this example) like so:
      </p>
<div class="code panel">
        &lt;argument&gt;-testdir&lt;/argument&gt;
        &lt;argument&gt;${basedir}/tests&lt;/argument&gt;
      </div>

      See the full example of how to run maven's exec:java with command line parameters here:
    <a href="https://github.com/dynamide/RestReplay/blob/master/pom.xml">https://github.com/dynamide/RestReplay/blob/master/pom.xml</a>
      <p></p>

      <p>Within the RestReplay directory, there are various <b>master</b> files, some control files, and directories for each service.
          You can select a particular master with the command line parameter -<strong>restReplayMaster</strong></p>

      <p>Most services should define their <b>control</b> file within their directory, e.g.</p>

      <div class="code panel">
      restreplay/master.xml                    <span class="comments">//the <b>master</b> file used by the nightly build.</span>
      restreplay/objectexit/                   <span class="comments">//the directory for a service called, say,  objectexit, <br>                                           //  with all its <b>control</b> files, and request/response templates.</span>
      restreplay/objectexit/object-exit.xml    <span class="comments">//the <b>control</b> file for this service, objectexit.</span>
      restreplay/objectexit/res/               <span class="comments">//a sub-directory to contain response templates.</span>
      </div>

      <p>For development, you may define your own master. See "<a href="#RestReplay-2.cRunning">2.c. Running</a>"<br>
      For integration testing, use the predefined <b>master</b> file called master.xml.</p>There is a test that checks the RestReplay installation itself.&nbsp; It lives in <br>&nbsp;&nbsp;&nbsp;&nbsp; _self_test/master-self-test.xml<br>

      <p>Within a <b>control</b> file, RestReplay finds testGroup elements as specified on the command line or in the <b>master</b> file, and then runs these testGroup elements.</p>

      <p>For each testGroup, a namespace is set up that will contain the results of all tests run in that testGroup, and any variables defined as the test runs. This namespace contains variables that dereference to java objects, so Strings, Date objects, etc. may be put into the namespace. For every test, RestReplay creates a named object of type org.dynamide.restreplay.ServiceResult, so that after that test has run, you may pull fields out of the ServiceResult object, such as responseCode, fullURL, location, and calculated fields such as from the <b>Location:</b> header.</p>

      <p>You may also use methods on the ServiceResult object that give you XPath access to any field in any part either sent or recieved from the server in that test.</p>

      <p>ServiceResult methods and fields:</p>

      <div class="code">
      public class ServiceResult ::

          <span class="comments">//dig into the schema part from the expanded request, identified by partName,</span>
          <span class="comments">//  and get the text value of node identified by xpath</span>
          public String sent(String partName, String xpath);

          <span class="comments">//dig into the schema part returned by the server, identified by partName,</span>
          <span class="comments">// and get the text value of node identified by xpath </span>
          public String got(String partName, String xpath);

          public String location <span class="comments">//the Location: header value of the resource, which is a full URL.</span>
      </div>
      <p>For each "<strong>test</strong>" node in a <strong>testGroup</strong>, RestReplay sets up a request, using the URI (which may contain expressions), the http method, and any parts specified for a POST or a PUT. The parts are read from text files in a directory relative to the RestReplay base directory, and may contain/define variables which get passed in. The value of these variables is evaluated in the <b>control</b> file just prior to the <strong>test</strong> node being run. So previous tests may be referenced. The parts are expanded for any expressions, and then put together in the appropriate http sequence and submitted to the server. The response from the server is then made available to the test to check using the "response" node. The "response" node allows you to specify a template file to compare, and any&nbsp; variables declared will be evaluated just prior to comparing the response from the server to the response template file.</p>

      <p>After the testGroup has run, RestReplay will perform cleanup. You may control cleanup via the "autoDeletePOSTS" attribute of "testGroup".</p>
<ul>
<li>
      If true, then RestReplay does a DELETE on each resource allocated.</li>
<li>
      If false, RestReplay does no automatic DELETEs.</li></ul>
<p>
      You may also programmatically call RestReplay, in which case you can programmatically control cleanup of individual tests. See "<a href="#RestReplay-2.c.4Cleanup">2.c.4 Cleanup</a>"</p>

      <p>Finally, results are aggregated and spit out to the command line console, and/or to reports. You can customize how verbose these results are using the "dump" node in the <b>master</b> file.</p>

      <p>If all <strong>testGroup</strong>s and all tests succeed, then RestReplay tells maven surefire that the suite succeeded. Otherwise, maven surefire is told that the suite failed. In this case, you may examine the console, or look at the maven surefire report, which will contain a tabular summary of all testGroups and tests. You may have to click "show all results" in the maven surefire report.</p>

      <p>RestReplay also creates a stand-alone report. Look at the command line output where RestReplay will report the location of this HTML report, e.g. something of this form:</p>
      <div class="code">    Master Report Index: ./tests/rest-replay-reports/index.local.las-master.xml.html </div>
      
      <p>This reports directory starts with an index file named after any <b>master</b> file you have run, which links to individual <b>control</b> file results.</p>

      
<h2><a name="RestReplay-2.ReferenceDocumentation" id="RestReplay-2.ReferenceDocumentation"></a>2. Reference Documentation</h2>

      <h3><a name="RestReplay-2.a.Installation" id="RestReplay-2.a.Installation"></a>2.a. Installation</h3>

      <h3><a name="RestReplay-2.b.Configuration" id="RestReplay-2.b.Configuration"></a>2.b. Configuration</h3>

      <h4><a name="RestReplay-2.b.1GeneralRules" id="RestReplay-2.b.1GeneralRules"></a>2.b.1 General Rules</h4>

      <p>General Variable Syntax: starts with letter or underscore (_), contains letters, numbers, underscore. No other special characters, especially not the dollar-sign ($).</p>

      <p>For an ID attribute to be valid, please use General Variable Syntax.</p>

      <p>Element names should also follow the General Variable Syntax.</p>

      <p>General Filename syntax: please stick to General Variable Syntax plus hyphen (-) and period (.).</p>
<p>Filenames may contain the delimiter / to denote directories. These will be transformed into platform-specific directory separators.</p>

      <h3><a name="RestReplay-2.cRunning" id="RestReplay-2.cRunning"></a>2.c Running</h3>

      <p>You can run RestReplay on the command-line, or from the command-line of maven surefire.</p>
<p>To run from the command line, using a jar distribution, then this example would run the environment <b>local</b> using the directory <b>/.tests</b>
            for control files and will put reports in <b>/.tests/rest-replay-reports</b>.  From that directory, it will find the master
            control file, <b>master.xml</b> .</p>
        <div class="code">
       java -jar lib/RestReplay-1.0.4-standalone.jar \
            -testdir <b>./tests</b> \
            -master <b>master.xml</b> \
            -env <b>local</b>
        </div><p>This would run RestReplay, telling it where to find <strong>test</strong>s, and which <strong>master</strong> to run.&nbsp; It also passes in an environment ID, which selects per-environment settings from the master file's <a href="#RestReplay-master.envs">&lt;env&gt;</a> section.</p>
<p><br></p>
<p>To run using the maven surefire test, which will find <strong>_self_test/master-self-test.xml</strong> on the path or in the Jar file:</p>

      <div class="code">
    mvn -o install
      </div>
    <p>Or, to override the port that the self-test will open, use:</p>
      <div class="code">
    mvn -o install -Dport=29003
      </div>

<p>To run using the maven surefire test pointed at a master, e.g. master.xml in ./tests/, simply:</p>

      <div class="code">
    mvn -o install \<br>        -D-testdir=./tests \<br>        -D-master=master.xml
      </div>
<p>or define your own <b>master</b> file, which you create:</p>

      <div class="code">
    vi ./my-master-file.xml
    mvn test -Dmaster=my-master-file.xml \<br>             -DforkMode=never \<br>             -Dtest=myTestID
      </div>

      <h4><a name="RestReplay-2.c.1Commandlineparameters" id="RestReplay-2.c.1Commandlineparameters"></a>2.c.1 Command-line parameters</h4><br>
<table class="matrix" width="100%">
  <colgroup>
    <col style="width:8em;">
    <col style="width:10em;">
    <col style="width:100px">
  </colgroup>  
<tbody>
<tr>
<th>Option</th>
<th>Example command-line parameter</th>

<th>Notes</th></tr>
<tr>
<td>testdir</td>
<td>-testdir ./tests</td>

<td>The path to all the tests.</td></tr>
<tr>
<td>reports</td>
<td>-reports /mnt/reports</td>

<td>Specify output reports dir, default is "rest-replay-reports" relative to testdir</td></tr>
<tr>
<td>testGroup</td>
<td>-testGroup main</td>

<td>Run one testGroup when running without a master.</td></tr>
<tr>
<td>test</td>
<td>-test pitoken</td>

<td>The ID from a <a href="#RestReplay-restReplay.testGroup.test">test</a> element when running one control file.</td></tr>
<tr>
<td>env</td>
<td>-env local</td>

<td>One <a href="#RestReplay-master.envs">env</a> ID defined in your master file.</td></tr>
<tr>
<td>autoDeletePOSTS</td>
<td>-autoDeletePOSTS true</td>

<td>Override the setting from the commandline, but will NOT override setting in control files.</td></tr>
<tr>
<td>dumpResults</td>
<td>-dumpResults true</td>
<td>If you are not running a master, you can control dumps here.</td>
</tr>

<tr>
<td>control</td>
<td>-control my-control.xml</td>
<td>Run one control file without a master.  Requires at least <strong>testGroup</strong>, and also accepts <strong>test</strong></td>
</tr>

<tr>
    <td>master</td>
    <td>-master my-master.xml</td>
    <td>Run one master file.&nbsp; If this is set, then the options <strong>control</strong>, <strong>testGroup</strong>, and <strong>test</strong> are ignored.</td>
</tr>

<tr>
    <td>selftest</td>
    <td>-selftest</td>
    <td>Run the self-test.  If the default port conflicts on your system, override it with -port.  The self-test spins up a basic http server, and points
    the self-test at http://localhost:port where port is defined by the -port parameter, or uses its default.  At the end of the test, the server is stopped.</td>
</tr>

<tr>
    <td>port</td>
    <td>-port 8081</td>
    <td>Allows you to override the default port that the self-test opens.  Default is 28080</td>
</tr>


</tbody>
</table>


<br>When running in Maven, you must pass these command line parameters via the Java -D mechanism, using an = sign to set the value, e.g.<br><br>
      <div class="code">mvn exec:java -Dtestdir=./tests</div>
<p>Here are some more examples of running on the command line.</p>
<p>In this run, we are hitting the control file pi/pitoken.xml with no master file.&nbsp; So we specify testGroup, test within that control file.</p>
    
      <div class="code">java -jar lib/RestReplay-1.0.4-standalone.jar \<br> -testdir ./tests \<br> -control pi/pitoken.xml \<br> -testGroup main \<br> -test pitoken
      </div>
      <p>In this run, we are sending reports to a different directory (./myreports) than the default (tests/rest-replay-reports)</p>
      
      <div class="code">java -jar lib/RestReplay-1.0.4-standalone.jar \<br> -testdir ./tests \<br> -master master.xml \<br> -reports ./myreports
      </div>
      
<h4><a name="RestReplay-2.c.2XMLconfigurationparametersinmasterfile" id="RestReplay-2.c.2XMLconfigurationparametersinmasterfile"></a>2.c.2 XML configuration parameters in <b>master</b> file</h4>

      <p>Click on an element to jump to documentation for that element and its attributes.</p>



      <div id="TOCMASTER" class="cheatsheet-body">
      <div class="cheatsheet-header">Master control file</div>
      <pre>  &lt;<a href="#RestReplay-master">restReplayMaster</a>&gt;
      &lt;<a href="#RestReplay-master.dump">dump</a>/&gt;
      &lt;<a href="#RestReplay-master.auths">auths</a>&gt;
          &lt;<a href="#RestReplay-master.auths.auth">auth</a>&gt;
      &lt;/auths&gt;
      &lt;<a href="#RestReplay-master.runOptions">runOptions</a>&gt;
          &lt;connectionTimeout /&gt;
          &lt;socketTimeout /&gt;
          &lt;errorsBecomeEmptyStrings /&gt;
          &lt;acceptAlertLevel /&gt;
          &lt;failTestOnWarnings /&gt;
          &lt;failTestOnErrors /&gt;
          &lt;dumpResourceManagerSummary /&gt;
          &lt;skipMutators /&gt;
      &lt;/runOptions&gt;
      &lt;vars&gt;
          &lt;<a href="#RestReplay-master.vars.var">var</a> /&gt;
      &lt;/vars&gt;
      &lt;<a href="#RestReplay-master.envs">envs</a>&gt;
          &lt;<a href="#RestReplay-master.envs.vars">vars</a>&gt;
            &lt;<a href="#RestReplay-master.envs.vars.var">var</a> /&gt;
          &lt;/vars&gt;
      &lt;/envs&gt;
      &lt;<a href="#RestReplay-master.run">run</a> /&gt;
  &lt;/restReplayMaster&gt;</pre>
      </div>
      <table border="1" cellpadding="3" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="3" class="pathrow element-hdr"><a name="RestReplay-master" id="RestReplay-master"></a>/restReplayMaster</td>
          </tr>

          <tr>
            <td>child elements</td>

            <td>
                dump<br>
                auths<br>
                runOptions<br>
                vars<br>
                envs<br>
                run<br>
            </td>
          </tr>

          <tr>
              <td colspan="3" class="element-hdr"><a name="RestReplay-master.dump" id="RestReplay-master.dump"></a>/restReplayMaster/dump</td>
          </tr>

          <tr>
              <td>@dumpServiceResult</td>

              <td>minimal - a one-line display<br>
                  detailed - enough information to debug<br>
                  full - more verbose, includes payloads</td>
          </tr>

          <tr>
              <td>@payloads</td>

              <td>dumps payloads after summary result.</td>
          </tr>
          <tr>
              <td>Matrix:</td>

              <td>
                  <table class="matrix">
                      <tbody>
<tr>
                          <td><br></td><th>payloads true</th><th>payloads false</th>
                      </tr>
                      <tr>
                          <th>auto</th><td>detail + payloads</td>
<td>detail <b style="color:orange;">+payloads if error</b></td>
                      </tr>
                      <tr>
                          <th>full</th><td>detail + payloads</td>
<td>detail</td>
                      </tr>
                      <tr>
                          <th>detailed</th><td>detail</td>
<td>detail</td>
                      </tr>
                      <tr>
                          <th>minimal</th><td>minimal</td>
<td>minimal</td>
                      </tr>
                  </tbody></table>
              </td>
          </tr>


          <tr>
              <td>Example:</td>

              <td>
                  <br>
                  <div class="code">&lt;dump dumpServiceResult="detailed" payloads="false" /&gt;</div>
              </td>
          </tr>




          <tr>
              <td colspan="3" class="element-hdr"><a name="RestReplay-master.auths" id="RestReplay-master.auths"></a>/restReplayMaster/auths</td>
          </tr>

          <tr>
              <td><br></td>

              <td>A list of users and their related Base-64 encrypted<tt>username:password</tt>strings. You can generate these strings in number of
                  ways, among them by using the online utility at <a href="http://www.motobit.com/util/base64-decoder-encoder.asp" class="external-link" rel="nofollow">http://www.motobit.com/util/base64-decoder-encoder.asp</a>.</td>
          </tr>

          <tr>
              <td>@default</td>

              <td>the user ID to use if none is specified in the test</td>
          </tr>

          <tr>
              <td colspan="3" class="element-hdr"><a name="RestReplay-master.auths.auth" id="RestReplay-master.auths.auth"></a>/restReplayMaster/auths/auth</td>
          </tr>

          <tr>
              <td>@ID</td>

              <td>a user ID</td>
          </tr>

          <tr>
              <td>element text</td>

              <td>Base-64 encrypted username:password to be used with "Basic Authentication" the same way a browser would.</td>
          </tr>

          <tr>
              <td>Example:</td>

              <td>
                  <p>Example:</p>

                  <div class="code">&lt;auths default="admin@example.org"&gt;
    &lt;auth ID="user1@museum1"&gt;dXNlcjFAbXVzZXVtMS5vcmc6dXNlcjFAbXVzZXVtMS5vcmc=&lt;/auth&gt;
    &lt;auth ID="bigbird2010"&gt;YmlnYmlyZDIwMTA6YmlnYmlyZDIwMTA=&lt;/auth&gt;
    &lt;auth ID="elmo2010"&gt;ZWxtbzIwMTA6ZWxtbzIwMTA=&lt;/auth&gt;
&lt;/auths&gt;                  </div>
              </td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-master.run" id="RestReplay-master.runOptions"></a>/restReplayMaster/runOptions</td>
          </tr>

          <tr>
            <td>connectionTimeout</td>

            <td>Timeout for connecting to remote servers, in milliseconds.</td>
          </tr>
          <tr>
            <td>socketTimeout</td>

            <td>Timeout for data transfer, in milliseconds.</td>
          </tr>

          <tr>
            <td>errorsBecomeEmptyStrings</td>

            <td>boolean: true|false.  Set to true if you want undefined vars and errors in var syntax to become empty strings, otherwise they are left intact in the template.</td>
          </tr>

          <tr>
<td>acceptAlertLevel</td>
<td>A String without quotes, one of: OK, WARN, ERROR.&nbsp; (As defined in Alert.LEVEL enum.)  <br /><i><b>[Not implemented.  When implemented, will abort the testGroup or Master run if Warnings or Errors occur in individual tests.]</b></i> </td></tr>
<tr>
<td>failTestOnWarnings</td>
<td>boolean: true|false.&nbsp; Simply overrides display of SUCCESS to be FAILURE for a test if there are any warnings.&nbsp; Warnings come from things like variables that are not defined but are used in expressions.&nbsp; Does not abort testGroup or Master runs.</td></tr>
<tr>
<td>failTestOnErrors</td>
<td>boolean: true|false. Simply overrides display of SUCCESS to be FAILURE for a test if there are any errors.&nbsp; Errors come from things like malformed expressions, files not found, socket timeouts on URLs, etc.&nbsp; Does not abort testGroup or Master runs.</td></tr>
<tr>
<td>dumpResourceManagerSummary</td>
<td>boolean: true|false. The ResourceManager finds files in the classpath and the filesystem.&nbsp; The HTML report for the Master contains a listing of all resources searched for.&nbsp; This setting allows you to dump that list to the console, if true.</td></tr>
<tr>
<td>skipMutators</td>
<td>boolean: true|false. All mutators in all tests will be skipped.&nbsp; Only the test will be run, and not any variations generated by the &lt;mutator&gt; set within the test.</td></tr>
<tr>
            <td>Example:</td>

            <td>
<div class="code"> &lt;runOptions&gt;
        &lt;connectionTimeout&gt;<strong>3000</strong>&lt;/connectionTimeout&gt;
        &lt;socketTimeout&gt;<strong>3000</strong>&lt;/socketTimeout&gt;
        &lt;errorsBecomeEmptyStrings&gt;<strong>true</strong>&lt;/errorsBecomeEmptyStrings&gt;
        &lt;acceptAlertLevel&gt;<strong>OK</strong>&lt;/acceptAlertLevel&gt;
        &lt;failTestOnWarnings&gt;<strong>true</strong>&lt;/failTestOnWarnings&gt;
        &lt;failTestOnErrors&gt;<strong>true</strong>&lt;/failTestOnErrors&gt;
        &lt;dumpResourceManagerSummary&gt;<strong>false</strong>&lt;/dumpResourceManagerSummary&gt;
        &lt;skipMutators&gt;<strong>false</strong>&lt;/skipMutators&gt;<br>&nbsp;&lt;/runOptions&gt;           </div></td>
          </tr>


          <tr>
<td>Discussion:</td>
<td>
    <pre>{rest-replay-base-directory}/runOptions.xml is the best place to do site-wide settings for RestReplay.
It contains a &lt;<strong>runOptions</strong>&gt; root element.

All of these options can be controlled in a master file, too.
In this case, your master file contains &lt;<strong>runOptions</strong>&gt; under the root element &lt;<strong>restReplayMaster</strong>&gt;

When overriding RunOptions in a master file, consider these two development scenarios:
            1) you are developing locally, and are setting per-test cases while you run tests,
               and you may or may not check in your changes.
                  In this case, change any settings you like as close to the testCase as you can in the chain:
                        <strong>runOptions &gt; master &gt; testGroup &gt; testCase</strong>
                  Review any changes to your xml config and control files you commit,
                  and check strategy as outlined in case (2).

            2) you are committing this master to source control, so that it gets picked up by automated builds.
                   In this case, you should have a coordinated reason for overriding the default file (runOptions.xml).

    Options:
        "<strong>connectionTimeout</strong>"
        "<strong>socketTimeout</strong>"
            The most reasonable override in a master file's RunOptions is the timeouts:
            these may vary by service, or host
            so one clean organization of test would be by services
            or known clusters of hosts with particular timeouts.
            You could have one control file, say, "master-edge-services.xml",
            with one testGroup, "timeCriticalServices", and in that testGroup put all the services from,
            say, a time-critical cluster.  In that control file,
            set the RunOption timeouts to be low.  In the Master, set the timeouts to be more "normal".
            All the other tests will run with "normal", and tests in master-edge-services.xml
            in testGroup "timeCriticalServices" will run with low timeouts.

        "<strong>errorsBecomeEmptyStrings</strong>" would be set locally if you were debugging.

        "<strong>dumpResourceManagerSummary</strong>" should probably be best left
           to the central location in the file (runOptions.xml)
           since it controls output to the console.

        "<strong>skipMutators</strong>" will skip processing for Mutators.  Mutators take one test and replays it with modified payloads.


    The heirarchy is:
       RunOptions : class defaults
         runOptions.xml : default for all tests
           my-master.xml :  overrides properties for this master.
                            You can have many masters and run them all from the command line
                            or test suite by using the startup command-line parameter:
                                -master relative-path-to-master-file
                            or for maven, surefire, etc:
                                -Dmaster=relative-path-to-master-file
</pre>
    (see docs/RestReplay.html for examples).
</td>
<td><br></td></tr>
<tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-master.run" id="RestReplay-master.vars.var"></a>/restReplayMaster/vars/var</td>
          </tr>
          <tr>
            <td>@id</td>

            <td>The name of the variable.  var elements declared here are available to all tests.  These are useful for
            defining host endpoints, or other values that will apply across all tests under a master.</td>
          </tr>
          <tr>
            <td>Example:</td>

            <td>
<div class="code">    &lt;restReplayMaster&gt;
        &lt;protoHostPort&gt;<b>${SNOOPSERVER}</b>&lt;/protoHostPort&gt;
        &lt;vars&gt;
            &lt;var ID="<b>PISERVER</b>"&gt;http://piserver.example.com&lt;/var&gt;
            &lt;var ID="<b>LASSERVER</b>"&gt;http://localhost:8080&lt;/var&gt;
            &lt;var ID="<b>SNOOPSERVER</b>"&gt;http://localhost:28082&lt;/var&gt;
        &lt;/vars&gt;
        ...
    &lt;/restReplayMaster&gt;

    <b>Then, in a test file, you can use full URLs which reference these servers
    defined in the master control file:</b>

    &lt;restReplay&gt;
        &lt;protoHostPort&gt;<b>${LASSERVER}</b>&lt;/protoHostPort&gt;

        &lt;testGroup ID="mainTestGroup" autoDeletePOSTS="false"&gt;

            &lt;test ID="pitoken"&gt;
                &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
                &lt;method&gt;POST&lt;/method&gt;
                &lt;uri&gt;<b>${PISERVER}</b>/v1/piapi-int/tokens&lt;/uri&gt;
                &lt;filename&gt;pitoken.json&lt;/filename&gt;
            &lt;/test&gt;

            &lt;test ID="createAssignment"&gt;
                &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
                &lt;method&gt;POST&lt;/method&gt;
                &lt;uri&gt;<b>${SNOOPSERVER}</b>/las-api/api/grid-apex/assignments&lt;/uri&gt;
                &lt;filename&gt;create-assignment.json&lt;/filename&gt;
                ...
            &lt;/test&gt;

            &lt;test ID="getAssignments"&gt;
                &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
                &lt;method&gt;GET&lt;/method&gt;
                &lt;uri&gt;/las-api/api/grid-apex/assignments&lt;/uri&gt;
                &lt;filename&gt;create-assignment.json&lt;/filename&gt;
                ...
            &lt;/test&gt;
        &lt;/testGroup&gt;
    &lt;/restReplay&gt;

      <b>"uri" values that have a full url will go to that host. If they don't have http://host:port,
        then they will use "protoHostPort" element from the test file, then the
        master file.
        In this case:</b>
          createAssignment will go against SNOOPSERVER:  http://localhost:28082
          getAssignments will go against LASSERVER:      http://localhost:8080
          pitoken will go against PISERVER               http://piserver.example.com
   







<hr>    <b>But if protoHostPort were not defined in this test file, then the
    protoHostPort will be pulled in from the master file.</b>


        &lt;restReplayMaster&gt;
            &lt;protoHostPort&gt;<b>${SNOOPSERVER}</b>&lt;/protoHostPort&gt;
            &lt;vars&gt;
                &lt;var ID="<b>PISERVER</b>"&gt;http://piserver.example.com&lt;/var&gt;
                &lt;var ID="<b>LASSERVER</b>"&gt;http://localhost:8080&lt;/var&gt;
                &lt;var ID="<b>SNOOPSERVER</b>"&gt;http://localhost:28082&lt;/var&gt;
            &lt;/vars&gt;
            ...
            <run controlfile="_self_test/dynamide.xml" testgroup="secondTestGroup">
        &lt;/restReplayMaster&gt;

        &lt;restReplay&gt;
          &lt;testGroup ID="secondTestGroup" autoDeletePOSTS="false"&gt;
            &lt;test ID="getAssignments"&gt;
                &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
                &lt;method&gt;GET&lt;/method&gt;
                &lt;uri&gt;/las-api/api/grid-apex/assignments&lt;/uri&gt;
                &lt;filename&gt;create-assignment.json&lt;/filename&gt;
                ...
            &lt;/test&gt;
          &lt;/testGroup&gt;
       &lt;/restReplay&gt;

      <b>In this case, getAssignments will use the default from protoHostPort in
      the master file:</b>
      secondTestGroup.getAssignments will go against SNOOPSERVER               http://localhost:28082
<br><br></run></div></td>
          </tr>






          <tr>
              <td colspan="3" class="element-hdr"><a name="RestReplay-master.envs" id="RestReplay-master.envs"></a>/restReplayMaster/envs</td>
          </tr>

          <tr>
              <td>&nbsp;</td>

              <td>Contains blocks of vars/var elements which define variables available to all tests run by this master.
                  <br>The calling program can supply the environment ID in the command-line parameter <b>-env</b>.
              <br>
              <br>
                  If calling restReplayInstance.readOptionsFromMasterConfigFile() programmatically, call restReplayInstance.setEnvID() first.
              </td>
          </tr>

          <tr>
              <td>child elements</td>

              <td><a href="#RestReplay-master.envs.vars">vars</a>
                  <br><a href="#RestReplay-master.envs.vars.var">vars/var</a></td>
          </tr>

          <tr>
              <td>@ID</td>

              <td>The environment ID, which is available for selection from the command line parameter -env, or the call RestReplay.setEnvID()</td>
          </tr>

          <tr>
              <td>default</td>

              <td>If true, this is the env which will be used if the user supplies none on the command line or programmatically.</td>
          </tr>


          <tr>
              <td>Example:</td>

              <td>
                  <div class="code">&lt;restReplayMaster&gt;
    &lt;protoHostPort&gt;${BESERVER}&lt;/protoHostPort&gt;
    &lt;envs&gt;
        &lt;env ID="local" default="true"&gt;
            &lt;vars&gt;
                &lt;var ID="LISERVER"&gt;http://li-api.example.com&lt;/var&gt;
                &lt;var ID="BESERVER"&gt;http://localhost:8080&lt;/var&gt;
                &lt;var ID="SELFTEST_SERVER"&gt;http://localhost:18080&lt;/var&gt;
            &lt;/vars&gt;
        &lt;/env&gt;
        &lt;env ID="dev"&gt;
            &lt;vars&gt;
                &lt;var ID="LISERVER"&gt;http://li-api.example.com&lt;/var&gt;
                &lt;var ID="BESERVER"&gt;http://be.example.com&lt;/var&gt;
            &lt;/vars&gt;
        &lt;/env&gt;
        &lt;env ID="qa"&gt;
            &lt;vars&gt;
                &lt;var ID="LISERVER"&gt;http://li-api.example.com&lt;/var&gt;
                &lt;var ID="BESERVER"&gt;http://be.example.com&lt;/var&gt;
            &lt;/vars&gt;
        &lt;/env&gt;
    &lt;/envs&gt;
    ...
    </div>

          </td></tr><tr>
              <td colspan="3" class="element-hdr"><a name="RestReplay-master.envs.vars" id="RestReplay-master.envs.vars"></a>/restReplayMaster/envs/vars</td>
          </tr>

          <tr>
              <td>child elements</td>

              <td>var</td>
          </tr>

          <tr>
              <td colspan="3" class="element-hdr"><a name="RestReplay-master.envs.vars.var" id="RestReplay-master.envs.vars.var"></a>/restReplayMaster/envs/vars/var</td>
          </tr>

          <tr>
              <td><br></td>

              <td>A single variable, which will be available to all tests called by this master.
                  Behaves exactly like <a href="#RestReplay-master.vars.var">/restReplayMaster/vars/var</a></td>
          </tr>

          <tr>
              <td colspan="3" class="element-hdr"><a name="RestReplay-master.run" id="RestReplay-master.run"></a>/restReplayMaster/run</td>
          </tr>

          <tr>
              <td>@controlFile</td>

              <td>name of <b>control</b> file, relative to RestReplay directory</td>
          </tr>

          <tr>
              <td>@testGroup</td>

              <td>ID of single testGroup within <b>control</b> file to run. To run multiple tests, use multiple /restReplayMaster/run elements.</td>
          </tr>

          <tr>
              <td>Example:</td>

              <td>
                  <span class="code">&lt;run controlFile="objectexit/object-exit.xml" testGroup="CRUDL" /&gt;</span>
              </td>
          </tr>
          <tr>
              <td>Example:</td>

              <td>
                  <div class="code">&lt;restReplayMaster&gt;
    ....
    &lt;run controlFile="objectexit/object-exit.xml" testGroup="CRUDL" /&gt;
    &lt;run controlFile="objectexit/object-exit.xml" testGroup="CRUDL" /&gt;
                  </div>
              </td>
          </tr>

        </tbody>
      </table>












      <h4><a name="RestReplay-2.c.3XMLconfigurationparametersincontrolfile" id="RestReplay-2.c.3XMLconfigurationparametersincontrolfile"></a>2.c.3 XML configuration parameters in <b>control</b> file</h4>

      <p>Click on an element to jump to documentation for that element and its attributes.</p>
      <div id="TOCTEST" class="cheatsheet-body">
      <div class="cheatsheet-header">Test control file</div>
      <pre>  &lt;<a href="#RestReplay-restReplay">restReplay</a>&gt;
      &lt;<a href="#RestReplay-restReplay.auths">auths</a>&gt;
          &lt;<a href="#RestReplay-restReplay.auths.auth">auth</a>&gt;&lt;/auth&gt;
      &lt;/auths&gt;
      &lt;<a href="#RestReplay-restReplay.testGroup">testGroup</a>&gt;
          &lt;<a href="#RestReplay-restReplay.testGroup.protoHostPort">protoHostPort</a> /&gt;
          &lt;<a href="#RestReplay-restReplay.testGroup.vars.var">vars</a> /&gt;
          &lt;<a href="#RestReplay-restReplay.testGroup.headers.header">headers</a> /&gt;
          &lt;<a href="#RestReplay-restReplay.testGroup.test">test</a>&gt;
              &lt;<a href="#RestReplay-restReplay.testGroup.test.method">method</a> /&gt;
              &lt;<a href="#RestReplay-restReplay.testGroup.test.uri">uri</a> /&gt;
              &lt;<a href="#RestReplay-restReplay.testGroup.test.filename">filename</a> /&gt;
              &lt;<a title="mutator" href="#RestReplay-restReplay.testGroup.test.mutator">mutator</a>&gt;
                  &lt;expected&gt;
                    &lt;code /&gt;
                  &lt;/expected&gt;
              &lt;/mutator&gt;
              &lt;<a href="#RestReplay-restReplay.testGroup.test.vars.var">vars</a>&gt;
                  &lt;<a href="#RestReplay-restReplay.testGroup.test.vars.var">var /</a>&gt;
              &lt;/vars&gt;
              &lt;<a href="#RestReplay-restReplay.testGroup.test.exports">exports</a>&gt;
                  &lt;<a href="#RestReplay-restReplay.testGroup.test.exports.vars.var">vars</a>&gt;
                      &lt;<a href="#RestReplay-restReplay.testGroup.test.exports.vars.var">var /</a>&gt;
                  &lt;/vars&gt;
              &lt;/exports&gt;
              &lt;<a href="#RestReplay-restReplay.testGroup.test.headers.header">headers</a>&gt;
                  &lt;<a href="#RestReplay-restReplay.testGroup.test.headers.header">header /</a>&gt;
              &lt;/headers&gt;
              &lt;<a href="#RestReplay-restReplay.testGroup.test.parts">parts</a>&gt;
                  &lt;<a href="#RestReplay-restReplay.testGroup.test.part">part</a>&gt;
                      &lt;<a href="#RestReplay-restReplay.testGroup.test.parts.part.label">label /</a>&gt;
                      &lt;<a href="#RestReplay-restReplay.testGroup.test.parts.part.filename">filename /</a>&gt;
                      &lt;<a href="#RestReplay-restReplay.testGroup.test.parts.part.var">var /</a>&gt;
                  &lt;/part&gt;
              &lt;/parts&gt;
              &lt;<a href="#RestReplay-restReplay.testGroup.test.response">response</a>&gt;
                  &lt;<a href="#RestReplay-restReplay.testGroup.test.response.expected">expected</a>/&gt;  
                  &lt;<a href="#RestReplay-restReplay.testGroup.test.response.validator">validator</a>/&gt;  
                  &lt;<a href="#RestReplay-restReplay.testGroup.test.response.parts">parts</a>&gt;
                      &lt;<a href="#RestReplay-restReplay.testGroup.test.response.parts.part">part</a>&gt;
                          &lt;<a href="#RestReplay-restReplay.testGroup.test.response.parts.part.label">label</a> /&gt;
                          &lt;<a href="#RestReplay-restReplay.testGroup.test.response.parts.part.f...">filename</a> /&gt;
                          &lt;<a href="#RestReplay-restReplay.testGroup.test.response.parts.part.var">var</a> /&gt;
                      &lt;/part&gt;
                  &lt;/parts&gt;
              &lt;/response&gt;
          &lt;/test&gt;
      &lt;/testGroup&gt;
  &lt;/restReplay&gt;</pre>
     </div>
      <table border="1" cellpadding="3" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay" id="RestReplay-restReplay"></a>/restReplay</td>
          </tr>

          <tr>
            <td>restReplay</td>

            <td>Root element of an RestReplay <b>control</b> file.</td>
          </tr>

          <tr>
            <td>child nodes</td>

            <td>protoHostPort<br>
                          auths<br>
                          testGroup</td>
          </tr>








          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.auths" id="RestReplay-restReplay.auths"></a>/restReplay/auths</td>
          </tr>

          <tr>
            <td>auths</td>

            <td>This element adds to any auths placed in the <b>master</b> file. Any ID defined in the <b>control</b> file overrides an auth of the same ID defined in the <b>master</b> file.</td>
          </tr>

          <tr>
            <td>child elements</td>

            <td>auth</td>
          </tr>

          <tr>
            <td>@default</td>

            <td>the user ID to use if none is specified in the test</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.auths.auth" id="RestReplay-restReplay.auths.auth"></a>/restReplay/auths/auth</td>
          </tr>

          <tr>
            <td>@ID</td>

            <td>a cspace user ID</td>
          </tr>

          <tr>
            <td>element text</td>

            <td>Base-64 encrypted username:password</td>
          </tr>

          <tr>
            <td>Example:</td>

            <td>
              <p>Example:</p>

              <div class="code">
&lt;auths default="admin@example.org"&gt;
&lt;auth ID="admin@example.org"&gt;YWRtaW5AY29sbGVjdGlvbnNwYWNlLm9yZzpBZG1pbmlzdHJhdG9y&lt;/auth&gt;
&lt;/auths&gt;
              </div>
            </td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup" id="RestReplay-restReplay.testGroup"></a>/restReplay/testGroup</td>
          </tr>

          <tr>
            <td>testGroup</td>
            <td>Runs a group of tests</td>
          </tr>

          <tr>
            <td>child elements</td>
            <td>headers<br>
                          vars<br>
                          test
          </td></tr>

          <tr>
            <td>@ID</td>

            <td>A unique, valid ID for this testGroup.<br>
            The <b>master</b> file uses this ID in its /restReplayMaster/run element to specify this testGroup to run.</td>
          </tr>

          <tr>
            <td>@autoDeletePOSTS</td>

            <td>"true" - resource will be autoDeleted.<br>
            "false" - resources will not be autoDeleted</td>
          </tr>

          <tr>
            <td>Example:</td>

            <td>
              <p>Example:</p>

              <div class="code">
&lt;testGroup ID="CRUDL" autoDeletePOSTS="true"&gt;
  &lt;test ID="foo"&gt;....&lt;/test&gt;
&lt;/testGroup&gt;
              </div>
            </td>
          </tr>





         


          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.vars.var" id="RestReplay-restReplay.testGroup.vars.var"></a>/restReplay/testGroup/vars/var</td>
          </tr>
          <tr>
            <td>var</td>
            <td>A variable that will be expanded just before the test is run.  Available to use in uri element.</td>
          </tr>
          <tr>
            <td>Example:</td>
            <td>
              <div class="code">
    &lt;restReplay&gt;
      &lt;protoHostPort&gt;...&lt;/protoHostPort&gt;
      &lt;testGroup ID="mainTestGroup"&gt;
        &lt;vars&gt;
            &lt;var ID="<b>COURSE_ID</b>"&gt;540f4515e4b004e7d8f22fc8&lt;/var&gt;
            &lt;var ID="TEMPLATE_ID"&gt;87fff5f0-652d-11e4-8229-179090669834&lt;/var&gt;
        &lt;/vars&gt;
        ...
        &lt;test ID="getAssignments"&gt;
            &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
            &lt;method&gt;GET&lt;/method&gt;
            &lt;uri&gt;/las-api/api/grid-apex/courses/<b>${COURSE_ID}</b>/assignments&lt;/uri&gt;
              </div>
            </td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.headers.header" id="RestReplay-restReplay.testGroup.headers.header"></a>/restReplay/testGroup/headers/header</td>
          </tr>
          <tr>
            <td>header</td>
            <td>A header that will be expanded just before the test is run.  If you need to force a particular test to skip including all the headers set by the testGroup,
            set inheritHeaders="false" on that &lt;test&gt; node.</td>
          </tr>
          <tr>
            <td>Example:</td>
            <td>
              <div class="code">
    &lt;restreplay&gt;
      &lt;testGroup ID="mainTestGroup"&gt;
        &lt;headers&gt;
            &lt;header name="X-ApiKey"&gt;19d26d452432968c9b636c9daf0c6d9b&lt;/header&gt;
            &lt;header name="x-authorization"&gt;${pitoken.got("//data")}&lt;/header&gt;
        &lt;/headers&gt;
        &lt;vars&gt;
            &lt;var ID="COURSE_ID"&gt;540f4515e4b004e7d8f22fc8&lt;/var&gt;
            &lt;var ID="TEMPLATE_ID"&gt;87fff5f0-652d-11e4-8229-179090669834&lt;/var&gt;
        &lt;/vars&gt;

        &lt;test ID="pitoken" <span class="note1">inheritHeaders="false"</span>&gt;
            <b>&lt;-- Will NOT inherit headers --&gt;</b>
            &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
            &lt;method&gt;POST&lt;/method&gt;
            &lt;uri&gt;${PISERVER}/v1/piapi-int/tokens&lt;/uri&gt;
            &lt;filename&gt;pitoken.json&lt;/filename&gt;
        &lt;/test&gt;
        
        &lt;test ID="deleteTemplate"&gt;
            <b>&lt;-- Will inherit headers: X-ApiKey and x-authorization --&gt;</b>
            &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
            &lt;method&gt;DELETE&lt;/method&gt;
            &lt;uri&gt;/las-api/api/grid-apex/courses/${COURSE_ID}/templates/${TEMPLATE_ID}&lt;/uri&gt;
        &lt;/test&gt;
    &lt;/restreplay&gt;
             </div>
            </td>
          </tr>


          <tr>
              <td>Example:</td>
              <td>
                  <div class="code">
    &lt;restreplay&gt;
      &lt;testGroup ID="mainTestGroup"&gt;
          &lt;headers&gt;
             &lt;header name="X-ApiKey"&gt;19d26d452432968c9b636c9daf0c6d9b&lt;/header&gt;
             &lt;header name="x-authorization"&gt;${pitoken.got("//data")}&lt;/header&gt;
          &lt;/headers&gt;
          &lt;vars&gt;
              &lt;var ID="COURSE_ID"&gt;540f4515e4b004e7d8f22fc8&lt;/var&gt;
              &lt;var ID="TEMPLATE_ID"&gt;87fff5f0-652d-11e4-8229-179090669834&lt;/var&gt;
          &lt;/vars&gt;

          &lt;test ID="pitoken" <span class="note1">inheritHeaders="false"</span>&gt;
              &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
              &lt;method&gt;POST&lt;/method&gt;
              &lt;uri&gt;${PISERVER}/v1/piapi-int/tokens&lt;/uri&gt;
              &lt;filename&gt;pitoken.json&lt;/filename&gt;
              <b>&lt;-- Will NOT inherit headers --&gt;</b>
              <b>&lt;-- And can still define its own headers --&gt;</b>
              &lt;headers&gt;
                  &lt;header name="X-SomeParameter"&gt;19d26d452432968c9b636c9daf0c6d9b&lt;/header&gt;
              &lt;/headers&gt;
          &lt;/test&gt;
  &lt;/restreplay&gt;</div>
              </td>
          </tr>








          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test" id="RestReplay-restReplay.testGroup.test"></a>/restReplay/testGroup/test</td>
          </tr>

          <tr>
            <td>test</td>

            <td>A test exists in a testGroup, and defines one request/response/validation set.</td>
          </tr>

          <tr>
            <td>@ID</td>

            <td>This ID must be unique within this file. Will become a variable name in the expression context bound to the ServiceResult object for this request/response.</td>
          </tr>

          <tr>
            <td>@auth</td>

            <td>the ID of the /restReplay/auths/auth or /restReplayMaster/auths/auth element to use for this request.<br>
            IMPORTANT: These are sticky - they stick around until reset by the next @auth specified in a test, in exec order of the tests in this file.</td>
          </tr>
          
          <tr>
            <td>@inheritHeaders</td>

            <td>boolean: true|false.  Default=true. If false, headers set in the master or testGroup will not be used by this test: only headers set
            within this test are sent to the server.</td>
          </tr>

          <tr>
              <td>@loop</td>

              <td><i>OPTIONAL. </i> integer.  Default=1. Sets the number of loops to run. Repeats the service call loop times.  Within validators, scripts, and expressions, the value of the current loop
                  index (zero-based) is <b>this.LoopIndex</b>
                  <br />

                  Use 0 (zero) to exclude this test. The test will not run or show up in reports.
                  (NOTE: Normally, you'll want to exclude tests by putting them in another testGroup.)

                  <br />
                  <br />Example:  (loop 3 times, from loopyTest_0 to loopyTest_2 )
                  <div class="code">Example:
                      &lt;test ID="loopyTest" loop="3">...
                      </div>
                  </td>
          </tr>


          <tr>
            <td>child elements</td>

            <td>method<br>
            uri<br>
            part<br>
            parts</td>
          </tr>

          <tr>
            <td>Example</td>

            <td>
              <div class="code">
&lt;test ID="oePersonauthority"&gt;
     &lt;method&gt;POST&lt;/method&gt;
     &lt;uri&gt;/cspace-services/personauthorities/&lt;/uri&gt;
     &lt;part&gt;
         &lt;label&gt;personauthorities_common&lt;/label&gt;
         &lt;filename&gt;objectexit/oePersonauthority.xml&lt;/filename&gt;
     &lt;/part&gt;
&lt;/test&gt;
              </div>
            </td>
          </tr>

          <tr>
            <td>Example</td>

            <td>
              This example shows switching auths between tests, and how the auths are sticky.<br>
              "permBigbird" and "accountBigbird" tests are run as user admin@example.org<br>
              and "dimension1" and "dimension1" tests are run as user bigbird2010.

              

























<div class="code">
&lt;!-- Set up permissions and account, and test bigbird2010 --&gt;
&lt;test ID="permBigbird" auth="admin@example.org"&gt;
    &lt;method&gt;POST&lt;/method&gt;
    &lt;uri&gt;/cspace-services/authorization/permissions&lt;/uri&gt;
    &lt;filename&gt;security/1-bigbird-permission.xml&lt;/filename&gt;
&lt;/test&gt;
&lt;test ID="accountBigbird"&gt;
    &lt;method&gt;POST&lt;/method&gt;
    &lt;uri&gt;/cspace-services/accounts&lt;/uri&gt;
    &lt;filename&gt;security/5-account-bigbird.xml&lt;/filename&gt;
&lt;/test&gt;
&lt;test ID="dimension1"  auth="bigbird2010"&gt;
    &lt;method&gt;POST&lt;/method&gt;
    &lt;uri&gt;/cspace-services/dimensions/&lt;/uri&gt;
    &lt;part&gt;
        &lt;label&gt;dimensions_common&lt;/label&gt;
        &lt;filename&gt;dimension/1.xml&lt;/filename&gt;
    &lt;/part&gt;
&lt;/test&gt;
&lt;test ID="dimension2"&gt;
    &lt;method&gt;PUT&lt;/method&gt;
    &lt;uri&gt;/cspace-services/dimensions/${dimension1.CSID}&lt;/uri&gt;
    &lt;part&gt;
        &lt;label&gt;dimensions_common&lt;/label&gt;
        &lt;filename&gt;dimension/2-put.xml&lt;/filename&gt;
    &lt;/part&gt;
&lt;/test&gt;
              </div>
            </td>
          </tr>
          
          
          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.vars.var" 
                                                      id="RestReplay-restReplay.testGroup.test.vars.var"></a>
             /restReplay/testGroup/test/vars/var</td>
          </tr>
          <tr>
            <td>var</td>

            <td>The same as <a href="#RestReplay-restReplay.testGroup.vars.var">restReplay/testGroup/vars/var</a>, but limited to one test</td>
          </tr>
          
          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.headers.header" 
                                                     id="RestReplay-restReplay.testGroup.test.headers.header"></a>
              /restReplay/testGroup/test/headers/header</td>
          </tr>
          <tr>
            <td>header</td>
            <td>The same as <a href="#RestReplay-restReplay.testGroup.headers.header">restReplay/testGroup/headers/header</a>, but limited to one test</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.exports" 
                                                     id="RestReplay-restReplay.testGroup.test.exports"></a>
               /restReplay/testGroup/test/exports</td>
          </tr>
          <tr>
            <td>exports</td>
            <td><b>After</b> the test is run, export a variable which can be referenced by another test, and can use values from the response.  
            You could define this in another, dependent test
            using syntax like ${firstTest.someExpression} but using exports puts that definition closer to the test, and so makes the dependent test cleaner.</td>
          </tr>
          <tr>
            <td>child elements</td>
            <td>vars<br />vars/var  - The same as <a href="#RestReplay-restReplay.testGroup.vars.var">restReplay/testGroup/vars/var</a></td>
          </tr>
          
          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.exports.vars.var" 
                                                     id="RestReplay-restReplay.testGroup.test.exports.vars.var"></a>
             /restReplay/testGroup/test/exports/vars/var</td>
          </tr>
          <tr>
            <td>var</td>
            <td>Evaluated <b>after</b> the test is run; otherwise similar to 
            <a href="#RestReplay-restReplay.testGroup.vars.var">restReplay/testGroup/vars/var</a> (and limited to one test).</td>
          </tr>
          
          


          
          
          
          
          
          

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.method" id="RestReplay-restReplay.testGroup.test.method"></a>/restReplay/testGroup/test/method</td>
          </tr>

          <tr>
            <td>method</td>

            <td>GET<br>
            POST<br>
            PUT<br>
            DELETE</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.uri" id="RestReplay-restReplay.testGroup.test.uri"></a>/restReplay/testGroup/test/uri</td>
          </tr>

          <tr>
            <td>uri</td>

            <td>The portion of the URL after protocol, host, and port.</td>
          </tr>

          <tr>
            <td>Example:</td>

            <td>
              Examples:<br>
              If URL is&nbsp; <a href="http://localhost:8180/cspace-services/personauthorities/" class="external-link" rel="nofollow">http://localhost:8180/cspace-services/personauthorities/</a><br>
              then uri is /cspace-services/personauthorities/<br>
              The uri contains any required queryString parameters:

              

























<div class="code">
    &lt;uri&gt;/cspace-services/objectexit/?sortBy=&amp;pgNum=2&amp;pgSz=1&lt;/uri&gt;
                </div>
              

              <p>The uri element may contain expression variables:</p>

              <div class="code">
    &lt;uri&gt;/cspace-services/personauthorities/${oePersonauthority.CSID}&lt;/uri&gt;
              </div>

              <p>This example uses the CSID returned in the Location header the server sent back when executing &lt;test ID="oePersonauthority"&gt;</p>
            </td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.filename" id="RestReplay-restReplay.testGroup.test.filename"></a>/restReplay/testGroup/test/filename</td>
          </tr>
          
<tr>
<td><br></td>
<td>If the request is not multipart, you can simply place the &lt;filename&gt; element under the &lt;test&gt; element.&nbsp; If the request is mime-multipart, this element goes in a &lt;part&gt; element.</td>
<td><br></td></tr>
<tr>
<td>Example: </td>
<td>&lt;filename&gt;_self_test/content-mutator-test.json&lt;/filename&gt;</td>
<td><br></td>
</tr>
          
<tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.uri" id="RestReplay-restReplay.testGroup.test.mutator"></a>/restReplay/testGroup/test/mutator</td>
          </tr>

<tr>
<td>Discussion</td>
<td>The &lt;<strong>mutator</strong>&gt; element loads a Mutator, defined by the <strong>type</strong> attribute.&nbsp;
  Currently, defined mutators are: "ExcludeFields" and "VarMutator".<br>
  <br>Mutators look at the JSON for a POST or PUT, and mutates the payload somehow.  They make the mutation ID and Index available.
  <br />
    It then executes a request to the server with this mutation and reports results underneath the test, one for each variant.&nbsp;
  <br><br>The &lt;<strong>code</strong>&gt; element defines acceptable HTTP response codes for groups of mutations.&nbsp;
  Each mutation is named using a strategy of the mutator implementation, and may reflect the index, or a key field.
    &nbsp; In the example below, mutation
  <span style="font-weight: bold;">numOfDrafts</span> expects the server to succeed in the range 200-299.&nbsp;
  The mutations <strong>book_id</strong> and&nbsp; <strong>course_id</strong> are expected to be rejected by the server with
  response code in the 400-499 and 500-599 ranges.&nbsp;
  The default (<strong>*</strong>) is to expect the server to respond to all other named mutations with code 200 in the statement
  <b>&lt;code range="200"&gt;*&lt;/code&gt;</b>
    <br />
    <br />
    See also: <a href="#RestReplay-restReplay.testGroup.test">Looping tests with test@loop</a>

</td>
<td><br></td></tr>
<tr>
  <td>ExcludeFields - Discussion</td>
  <td>This mutator (type="ExcludeFields") looks at the JSON for a POST or PUT, and one-by-one removes the top-level fields.&nbsp;
      It then executes a request to the server with this mutation and reports results underneath the test, one for each variant.&nbsp;
      <br><br>The &lt;<strong>code</strong>&gt; element defines acceptable HTTP response codes for groups of mutations.&nbsp;
      Since this mutator looks at top-level fields, each mutation is named after the missing field.&nbsp;
  </td>
  <td><br></td></tr>
<tr>
<td>ExcludeFields Example:</td>
<td>
  <div class="code">&lt;test ID="dynamideUseMutator"&gt;
    &lt;expectedCodes&gt;200&lt;/expectedCodes&gt;
    &lt;method&gt;POST&lt;/method&gt;
    &lt;uri&gt;/tagonomy?mock=true&lt;/uri&gt;
    &lt;filename&gt;_self_test/content-mutator-test.json&lt;/filename&gt;
    &lt;mutator type="ExcludeFields"&gt;
        &lt;expected&gt;
            &lt;code range="200"&gt;*&lt;/code&gt;
            &lt;code range="200-299"&gt;numOfDrafts&lt;/code&gt;
            &lt;code range="400-499,500-599"&gt;book_id, course_id&lt;/code&gt;
        &lt;/expected&gt;
    &lt;/mutator&gt;
&lt;/test&gt;
  </div></td>
  
  
  <td><br></td></tr>

          <tr>
              <td>VarMutator Example:</td>
              <td>
                  VarMutator re-applies the service call, once for each of these vars blocks, which set vars before the call, in the file-order of the vars groups.
                  IDs are informational strings--set to any alphanumeric string.  Here is an example from the RestReplay self-test.
                  <div class="code">
&lt;test ID="selftestUseVarMutator">
    &lt;expectedCodes>200&lt;/expectedCodes>
    &lt;method>PUT&lt;/method>
    &lt;uri>/tagonomy?mock=true&amp;mutation=${this.mutation}&amp;forceCode=300&lt;/uri>
    &lt;filename>_self_test/var-mutator-test.json&lt;/filename>
    &lt;vars>
        &lt;var ID="DAYS">${24*60*60*1000}&lt;/var>
        &lt;var ID="BASE_DATE">${tools.now()}&lt;/var>
        &lt;var ID="DUE_DATE_MILLIS">${BASE_DATE +0 * DAYS}&lt;/var>
        &lt;var ID="FOOBAR">${this.testID}&lt;/var>
        &lt;var ID="DueDate2">Due ${BASE_DATE} -basedate&lt;/var>
        &lt;var ID="DueDate">Due ${kit.dates.getMonthName(BASE_DATE)} ${kit.dates.getDayOfMonth(BASE_DATE)}&lt;/var>
    &lt;/vars>
    &lt;mutator type="VarMutator">
        &lt;expected>
            &lt;code range="4xx">*&lt;/code>
        &lt;/expected>
        &lt;vars ID="0">
            &lt;var idbase="DUE_DATE_MILLIS">${BASE_DATE +1 * DAYS}&lt;/var>
            &lt;var idbase="FOOBAR">${this.testID} set in 0.&lt;/var>
        &lt;/vars>
        &lt;vars ID="1">
            &lt;var idbase="DUE_DATE_MILLIS">${BASE_DATE +2 * DAYS}&lt;/var>
            &lt;var idbase="FOOBAR">${this.testID + ' mutator index: ' + this.mutator.getIndex() }&lt;/var>
        &lt;/vars>
        &lt;vars ID="2">
            &lt;var idbase="DUE_DATE_MILLIS">${BASE_DATE +3 * DAYS}&lt;/var>
            &lt;var idbase="FOOBAR">${this.testID + ' mutator index: ' + this.mutator.getIndex() }&lt;/var>
        &lt;/vars>
        &lt;vars ID="3">
            &lt;var idbase="FOOBAR">${this.testID + ' mutator index: ' + this.mutator.getIndex() }&lt;/var>
        &lt;/vars>
    &lt;/mutator>
&lt;/test>

                  </div>
              </td>


              <td><br></td></tr>
<tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.parts" id="RestReplay-restReplay.testGroup.test.parts"></a>/restReplay/testGroup/test/parts</td>
          </tr>

          <tr>
            <td>parts</td>

            <td>Optional container for "part" elements. Needed if there are more than one part element, otherwise not needed.</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.parts.part" id="RestReplay-restReplay.testGroup.test.parts.part"></a><a name="RestReplay-restReplay.testGroup.test.part" id="RestReplay-restReplay.testGroup.test.part"></a>/restReplay/testGroup/test/part<br>
            /restReplay/testGroup/test/parts/part</td>
          </tr>

          <tr>
            <td>part</td>

            <td>If there is just one part, the parts container element may be omitted.<br>
            A schema part sent to server in request, identified by a schema name in the "label" child element.<br>
            Models a request schema part sent in either a multipart mime message,<br>
            or in a CSpace 1.4 style application/xml message delimited by xml elements describing the schema part.</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.parts.part.label" id="RestReplay-restReplay.testGroup.test.parts.part.label"></a>/restReplay/testGroup/test/parts/part/label</td>
          </tr>

          <tr>
            <td>label</td>

            <td>A schema name for this part, such as "objectexit_common", or "collectionspace_core".</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.parts.part.filename" id="RestReplay-restReplay.testGroup.test.parts.part.filename"></a>/restReplay/testGroup/test/parts/part/filename</td>
          </tr>

          <tr>
            <td>filename</td>

            <td>The filename of the payload, relative to the RestReplay directory (not relative to the <b>control</b> file).</td>
          </tr>

          <tr>
            <td>Example:</td>

            <td>&amp;&lt;filename&gt;objectexit/object-exit.xml&lt;/filename&gt;</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.parts.part.var" id="RestReplay-restReplay.testGroup.test.parts.part.var"></a>/restReplay/testGroup/test/parts/part/var</td>
          </tr>

          <tr>
            <td>var</td>

            <td>Declares a variable to be made available to the expansion of the part template.</td>
          </tr>

          <tr>
            <td>@ID</td>

            <td>the name of the variable that can be dereferenced in an expression e.g. &lt;var ID="depositor"&gt;...&lt;/var&gt;</td>
          </tr>

          <tr>
            <td>Example:</td>

            <td>
              var may be dereferenced in an expression in the request payload.like this:

              

























<div class="code">
    &lt;depositor&gt;${depositor}&lt;/depositor&gt;
              </div>

              <p>The var itself may include any expression syntax in its element text, so that vars can be set based on any previous tests or java objects in the expression namespace.<br>
              e.g.</p>

              <div class="code">
    &lt;var ID="depositor"&gt;${oePersonGET.got("persons_common","//refName")}&lt;/var&gt;
              </div><br>
              In context, this looks like:

              

























<div class="code">
    &lt;test ID="oeObject"&gt;
        &lt;method&gt;POST&lt;/method&gt;
        &lt;uri&gt;/cspace-services/objectexit/&lt;/uri&gt;
        &lt;part&gt;
            &lt;label&gt;objectexit_common&lt;/label&gt;
            &lt;filename&gt;objectexit/oeObject.xml&lt;/filename&gt;
            &lt;var ID="depositor"&gt;${oePersonGET.got("persons_common","//refName")}&lt;/var&gt;
            &lt;var ID="currentOwner"&gt;${oePersonGET.got("persons_common","//refName")}&lt;/var&gt;
            &lt;var ID="exitNumber"&gt;oeObject-exitnum-123&lt;/var&gt;
        &lt;/part&gt;
    &lt;/test&gt;
              </div>

              <p>In this example, the ServiceResult object from the previous test identified by &lt;test ID="oePersonGET"&gt; exposes a method called got(String partLabel, String elementXPath), which can extract the node text for an element in a schema
              part returned by a response.</p>
            </td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.response" id="RestReplay-restReplay.testGroup.test.response"></a>/restReplay/testGroup/test/response</td>
          </tr>
          <tr>
            <td>response</td>
            <td>Container for evaluating the response from the server</td>
          </tr>

          <tr>
            <td>child elements</td>
            <td>expected<br>
            parts<br>
            part</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.response.validator" id="RestReplay-restReplay.testGroup.test.response.validator"></a>/restReplay/testGroup/test/response/validator</td>
          </tr>
          <tr>
            <td>validator</td>
            <td>Contains a filename reference to a validator script.  Like all filenames in the control file it is relative to the tests directory.
            <br />The script validates the response from the server.  Available to the validator 
                are the request, response, and everything in the ServiceResult class, and the map of all previously run tests in this test group
                (in the file order of the control file).</td>
          </tr>


          <tr>
              <td>variables in context</td>
              <td><div class="code">
serviceResult          - also stored as "this". Contains all vars and results, as well as IDs, timing, stati, etc.
serviceResultsMap      - a map of all previously run tests, kept in insertion order of the tests run.
                          Key is the ID of the test element.
this.mutator.getIndex() - zero-based index of which mutation loop this is.
kit                     - instance of org.dynamide.restreplay.Kit
tools                     - instance of org.dynamide.util.Tools
              </div>
              </td>
          </tr>

          <tr>
              <td>Useful methods in context objects</td>

              <td>
                  These and other public variables are avaiable in the context hanging off the base objects in the context.
                  See also the javadoc or source for the classes, for example org.dynamide.restreplay.ServiceResult.
              <div class="code">
this.mutationID
this.mutator.getIndex()
this.testID
this.testGroupID
this.testIDLabel
this.idFromMutator
this.loopIndex
this.fullURL
this.deleteURL

kit.dates.*
              </div>
              </td>
          </tr>

          <tr>
            <td>@lang</td>
            <td>Supported values are <b>javascript</b> and <b>jexl</b>.  Default is <b>jexl</b>.  This is the language used for the validator.  
            Jexl scripts must be surrounded by ${}, 
            and you may have multiple blocks like that, wrapped in text, e.g. Foo${result.testID} Bar Baz ${result.gotExpectedResult()}.<br>
            JavaScript blocks should have a return statement as the last line, or an expression as the last line, which will be the result.
          </tr>
          
          <tr>
            <td>example<br />&nbsp;(control file)</td>
            <td><div class="code">&lt;test ID="testA">
    &lt;uri>
        ...
    &lt;response>
        &lt;validator lang="jexl"><b>assignments/res/testA.validator.jexl</b>&lt;/validator>
    &lt;/response>
&lt;/test>

&lt;test ID="testB">
    &lt;uri>
        ...
    &lt;response>
        &lt;filename>assignments/res/testB.json&lt;/filename>
        &lt;validator lang="javascript"><b>assignments/res/testB.validator.js</b>&lt;/validator>
    &lt;/response>
&lt;/test></div>
Note: in this example, the &lt;filename> element points to a file containing the
expected response.  RestReplay automatically compares the response to this
expected response file for content, based on the element
<a href="#RestReplay-restReplay.testGroup.test.response.expected">/restReplay/testGroup/test/response/expected</a>.  The validator is then run as a
separate validation step. 
          </tr>
          
          <tr>
            <td>example<br />&nbsp;(script file)<br />&nbsp;@lang="jexl"</td>
            <td><b>assignments/res/testA.validator.jexl</b>
<div class="code">
${
 var foo = 1;
 return result.result;
}
            </div>
          </tr>  
          <tr>
            <td>example<br />&nbsp;(script file)<br />&nbsp;@lang="javascript"</td>
            <td><b>assignments/res/testB.validator.js</b>
<div class="code">
var label = serviceResult.testIDLabel;
var result = serviceResult.result;
stdout.println("LOG from javascript: "+label);
stdout.println("LOG from javascript: "+result);
"OK from JS";
            </div>
          </tr>  
          
          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.response.expected" id="RestReplay-restReplay.testGroup.test.response.expected"></a>/restReplay/testGroup/test/response/expected</td>
          </tr>

          <tr>
            <td>@level</td>

            <td>
              Single element for evaluating the response from the server. Specify the type of comparisons for validation with<br>
              attribute level: can be "ZERO", "TEXT", "ADDOK", "TREE", "TREE_TEXT", and "STRICT".<br>
              (For all tests, whitespace allowed by XML is ignored, and also ignoring whitespace at either end of child node text.<br>
              i.e. a child's text node is trimmed prior to comparison.)

<ul>
                <li>ZERO: does no checking. If the server sends a valid reponse, the reponse succeeds.</li>

                <li>ADDOK: Checks for TEXT differences. Nodes added by server, are allowed. Nodes expected by test but ommitted by server are in error.</li>

                <li>TEXT: makes sure nodes from the server match nodes from the file named in "filename" child element of "response".<br>
                Allows the server to add nodes, e.g. CSID, inAuthority, and other calculated fields may be skipped.</li>

                <li>TREE: makes sure no nodes/children are added or removed.</li>

                <li>TREE_TEXT: makes sure nodes match, and that no nodes/children are added or removed.</li>

                <li>STRICT makes sure all nodes match exactly. This is the strictest level of match.</li>
              </ul>
            </td>
          </tr>

          <tr>
            <td>Example:</td>

            <td>
              <div class="code">
    &lt;expected level="TEXT" /&gt;
              </div>
            </td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.response.parts" id="RestReplay-restReplay.testGroup.test.response.parts"></a>/restReplay/testGroup/test/response/parts</td>
          </tr>

          <tr>
            <td>parts</td>

            <td>Optional container for part elements. Required if more than one part element.</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.response.parts.part" id="RestReplay-restReplay.testGroup.test.response.parts.part"></a>/restReplay/testGroup/test/response/parts/part</td>
          </tr>

          <tr>
            <td>part</td>

            <td>A template containing the schema part expected from the server, as opposed to the actual part sent from the server.</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.response.parts.part.label" id="RestReplay-restReplay.testGroup.test.response.parts.part.label"></a>/restReplay/testGroup/test/response/parts/part/label</td>
          </tr>

          <tr>
            <td>label</td>

            <td>The name of the schema, such as "objectexit_common", or "collectionspace_core".</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.response.parts.part.f..." id="RestReplay-restReplay.testGroup.test.response.parts.part.f..."></a>/restReplay/testGroup/test/response/parts/part/filename</td>
          </tr>

          <tr>
            <td>filename</td>

            <td>The filename of the template for comparing to what the server sent.</td>
          </tr>

          <tr>
            <td colspan="3" class="element-hdr"><a name="RestReplay-restReplay.testGroup.test.response.parts.part.var" id="RestReplay-restReplay.testGroup.test.response.parts.part.var"></a>/restReplay/testGroup/test/response/parts/part/var</td>
          </tr>

          <tr>
            <td>var</td>

            <td>A variable declaration to be passed into the template.</td>
          </tr>

          <tr>
            <td>@ID</td>

            <td>ID defines the variable name that will appear in the expression context, and the text of the var node will be evaluated just prior to comparing the template to the response from the server.</td>
          </tr>

          <tr>
            <td>Example:</td>

            <td>
              <p>The file named in /restReplay/testGroup/test/response/part/filename is a template, which may contain variables.<br>
              Those variables should be defined in var child elements at this level. This keeps complicated variables out of the template file and in the <b>control</b> file. Templates should just expose simple variables, such as ${depositor} and not complicated variables that dig into the objects in the namespace, e.g. this would be considered bad form if found inside a template file:</p>

              <div class="code">
    &lt;!-- DON'T DO THIS IN TEMPLATE FILE --&gt;
    &lt;shortIdentifier&gt;${test2.sent("pa_com","//sid")}&lt;/shortIdentifier&gt;
              </div>

              <p>It would be better to defined that variable in the <b>control</b> file, and then pass that single variable into the template.<br>
              e.g. define this in the template file "objectexit/res/test2GET.res.xml"</p>

              <div class="code">
    &lt;shortIdentifier&gt;<b>${sid}</b>&lt;/shortIdentifier&gt;
              </div>

              <p>then instantiate that variable in the <b>control</b> file:</p>

              <div class="code">
    &lt;response&gt;
      &lt;expected level="TEXT" /&gt;
      &lt;part&gt;
        &lt;label&gt;t2_com&lt;/label&gt;
        &lt;filename&gt;objectexit/res/test2GET.res.xml&lt;/filename&gt;
        &lt;var ID="<b>sid</b>"&gt;${test2.sent("pa_com","//id")}&lt;/var&gt;
      &lt;/part&gt;
    &lt;/response&gt;
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <h4><a name="RestReplay-2.c.4Cleanup" id="RestReplay-2.c.4Cleanup"></a>2.c.4 Cleanup</h4>

      <p>After the testGroup has run, RestReplay will perform cleanup. You may control cleanup via the "autoDeletePOSTS" attribute of "testGroup". If true, then any POSTs that returned a "Location: " header will result in RestReplay sending a DELETE on that Location: URL. If false, RestReplay will perform no automated cleanup for that testGroup. If you called RestReplay programmatically, then you may initiate cleanup manually by calling on these methods of org.dynamide.restreplay.RestReplay</p>

      <div class="code">
    public List&lt;ServiceResult&gt;  autoDelete(String logName);
      </div>

      <p>or</p>

      <div class="code">
    public static List&lt;ServiceResult&gt; autoDelete(Map&lt;String, ServiceResult&gt; serviceResultsMap, String logName);
      </div>
    </div>
  </div>
  
<script>
    debugger;
    var tm = document.getElementById("TOCMASTER");
    var tt = document.getElementById("TOCTEST");
    var d1 = document.getElementById("TOCDEST1");
    d1.innerHTML = tm.innerHTML;
    var d2 = document.getElementById("TOCDEST2");
    d2.innerHTML = tt.innerHTML;
</script>
</body></html>